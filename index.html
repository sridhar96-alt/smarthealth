<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Healify</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2E8B57">

<style>
body{font-family:Arial;margin:0;background:#f4f4f4;}
header{background:#2E8B57;color:white;padding:15px;text-align:center;}
.container{padding:15px;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;}
.card{background:white;padding:15px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.2);}
button{background:#2E8B57;color:white;border:none;padding:8px;width:100%;margin-top:5px;border-radius:5px;}
input,select{width:100%;padding:7px;margin:5px 0;}
#riskBox{padding:10px;color:white;text-align:center;border-radius:8px;}
#aiBtn{position:fixed;bottom:20px;right:20px;background:#2E8B57;color:white;border:none;padding:15px;border-radius:50%;font-size:20px;}
#aiChat{display:none;position:fixed;bottom:80px;right:20px;width:300px;background:white;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.3);}
#aiHeader{background:#2E8B57;color:white;padding:10px;}
#aiMessages{height:200px;overflow-y:auto;padding:10px;font-size:14px;}
</style>
</head>

<body>

<header>ðŸŒ¿ Healify Smart Health</header>

<div class="container">

<div class="card">
<h3>Daily Entry</h3>
<input type="number" id="water" placeholder="Water">
<input type="number" id="sleep" placeholder="Sleep">
<input type="number" id="exercise" placeholder="Exercise">
<button onclick="save()">Save</button>
<p id="insight"></p>
</div>

<div class="card">
<h3>BMI</h3>
<input id="h" placeholder="Height cm">
<input id="w" placeholder="Weight kg">
<button onclick="bmi()">Calculate</button>
<p id="bmi"></p>
</div>

<div class="card">
<h3>Risk</h3>
<div id="riskBox">Low</div>
</div>

<div class="card">
<h3>Points</h3>
<p id="points">0</p>
</div>

</div>

<button id="aiBtn" onclick="toggleAI()">ðŸ’¬</button>

<div id="aiChat">
  <div id="aiHeader">Healify AI</div>
  <div id="aiMessages"></div>
  <input id="aiInput">
  <button onclick="sendAI()">Send</button>
</div>

<button id="installBtn" style="display:none;position:fixed;top:10px;right:10px;">Install App</button>

<script>
let pts=0;

function save(){
 let w=water.value,s=sleep.value,e=exercise.value;
 pts+=10; points.innerText=pts;
 insight.innerText = (w<6?"Drink more water ":"")+(s<7?"Sleep more ":"")+(e<30?"Exercise more":"");
 riskBox.innerText = (w>=6&&s>=7&&e>=30)?"Low":"High";
}

function bmi(){
 let v=(w.value/((h.value/100)**2)).toFixed(2);
 document.getElementById("bmi").innerText="BMI "+v;
}

/* AI CHAT (demo) */
function toggleAI(){ aiChat.style.display= aiChat.style.display==="block"?"none":"block"; }
function sendAI(){
 let msg=aiInput.value;
 aiMessages.innerHTML+=`<p><b>You:</b>${msg}</p>`;
 aiMessages.innerHTML+=`<p><b>Healify:</b>Ask about BMI, sleep, diet.</p>`;
 aiInput.value="";
}

/* INSTALL */
let deferredPrompt;
window.addEventListener("beforeinstallprompt",e=>{
 e.preventDefault(); deferredPrompt=e;
 installBtn.style.display="block";
});
installBtn.onclick=()=>deferredPrompt.prompt();

/* SW */
if("serviceWorker" in navigator){
 navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
