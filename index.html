<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<title>Healify</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2E8B57">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial;margin:0;background:#f4f4f4;text-align:center;}
header{background:#2E8B57;color:white;padding:15px;font-size:24px;}
.container{padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:15px;}
.card{background:white;padding:15px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.2);}
input,select,button{padding:8px;margin:5px;width:90%;}
button{background:#2E8B57;color:white;border:none;cursor:pointer;border-radius:5px;}
#riskBox{color:white;padding:10px;border-radius:8px;font-weight:bold;}
canvas{max-width:100%;}
#chatbot{position:fixed;bottom:20px;right:20px;width:260px;background:white;border:2px solid #2E8B57;border-radius:10px;}
#chat-header{background:#2E8B57;color:white;padding:10px;font-weight:bold;}
#chat-box{height:200px;overflow-y:auto;padding:10px;font-size:14px;text-align:left;}
#user-input{width:65%;padding:6px;border:1px solid #ccc;}
</style>

</head>

<body>

<header>ðŸŒ¿ Healify - Smart Health App</header>

<div class="container">

<div class="card">
<h3>Daily Entry</h3>
<input type="number" id="water" placeholder="Water (glasses)">
<input type="number" id="sleep" placeholder="Sleep (hours)">
<input type="number" id="exercise" placeholder="Exercise (minutes)">
<select id="mood">
<option>Happy</option>
<option>Sad</option>
<option>Stressed</option>
<option>Energetic</option>
</select>
<button onclick="saveData()">Save</button>
<p id="streak"></p>
<p>Points: <span id="points">0</span></p>
</div>

<div class="card">
<h3>BMI Calculator</h3>
<input type="number" id="height" placeholder="Height (cm)">
<input type="number" id="weight" placeholder="Weight (kg)">
<p id="bmiResult"></p>
</div>

<div class="card">
<h3>Weekly Average</h3>
<p id="weeklyAvg"></p>
</div>

<div class="card">
<h3>Habit Insights</h3>
<p id="insights"></p>
</div>

<div class="card">
<h3>Health Risk</h3>
<div id="riskBox">Low Risk</div>
</div>

<div class="card">
<h3>Mood Analytics</h3>
<canvas id="moodChart"></canvas>
</div>

<div class="card">
<h3>Voice Input</h3>
<button onclick="startVoice()">ðŸŽ¤ Speak</button>
<p id="voiceText"></p>
</div>

<div class="card">
<h3>Wearable Integration</h3>
<button onclick="simulateWearable()">Sync Steps</button>
<p id="wearableData"></p>
</div>

</div>

<div id="chatbot">
<div id="chat-header">ðŸ’¬ Healify AI</div>
<div id="chat-box"></div>
<input type="text" id="user-input" placeholder="Ask health tips...">
<button onclick="sendMessage()">Send</button>
</div>

<script>
let points=0, streak=0;
let moodData=[0,0,0,0];

function saveData(){
let w=+water.value, s=+sleep.value, e=+exercise.value;
let mood=mood.value;
points+=10; streak++;
pointsText.innerText=points;
streakText.innerText="ðŸ”¥ Streak: "+streak+" days";
calculateBMI(); weeklyAverage(w,s,e); insights(w,s,e); risk(w,s,e); updateMood(mood);
}

function calculateBMI(){
let h=height.value/100, w=weight.value;
if(!h||!w) return;
let bmi=(w/(h*h)).toFixed(1);
let status=bmi<18.5?"Underweight":bmi<25?"Normal":bmi<30?"Overweight":"Obese";
bmiResult.innerText=`BMI: ${bmi} (${status})`;
}
height.oninput=calculateBMI;
weight.oninput=calculateBMI;

function weeklyAverage(w,s,e){weeklyAvg.innerText="Average Score: "+((w+s+e)/3).toFixed(1);}
function insights(w,s,e){
let msg="";
if(w<6) msg+="Drink more water. ";
if(s<6) msg+="Sleep more. ";
if(e<30) msg+="Exercise more. ";
if(msg==="") msg="Excellent habits!";
insights.innerText=msg;
}
function risk(w,s,e){
let box=riskBox;
if(w>=6&&s>=7&&e>=30){box.innerText="Low Risk";box.style.background="green";}
else if(w>=4&&s>=5){box.innerText="Moderate Risk";box.style.background="orange";}
else{box.innerText="High Risk";box.style.background="red";}
}

const ctx=document.getElementById("moodChart");
const chart=new Chart(ctx,{type:"bar",data:{labels:["Happy","Sad","Stressed","Energetic"],datasets:[{label:"Mood",data:moodData}]}});

function updateMood(m){
if(m==="Happy")moodData[0]++;
if(m==="Sad")moodData[1]++;
if(m==="Stressed")moodData[2]++;
if(m==="Energetic")moodData[3]++;
chart.update();
}

function startVoice(){
let rec=new(window.SpeechRecognition||window.webkitSpeechRecognition)();
rec.onresult=e=>voiceText.innerText=e.results[0][0].transcript;
rec.start();
}

function simulateWearable(){
wearableData.innerText="Steps synced: "+Math.floor(Math.random()*10000);
}

function sendMessage(){
let input=userInput.value;
if(!input)return;
chatBox.innerHTML+=`<p><b>You:</b> ${input}</p>`;
chatBox.innerHTML+=`<p><b>Healify:</b> ${botReply(input)}</p>`;
chatBox.scrollTop=chatBox.scrollHeight;
userInput.value="";
}
function botReply(t){
t=t.toLowerCase();
if(t.includes("bmi")) return "Use BMI section.";
if(t.includes("exercise")) return "30 minutes daily helps.";
if(t.includes("sleep")) return "Sleep 7-8 hours.";
return "Ask about BMI, exercise, sleep, or diet.";
}
</script>

<script>
if('serviceWorker' in navigator){
navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>
